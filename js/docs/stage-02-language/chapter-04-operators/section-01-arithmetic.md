# 2.4.1 算术运算符

## 概述

算术运算符用于执行数学运算。本节介绍所有算术运算符的使用方法和注意事项。

## 基本算术运算符

### 加法（+）

```js
// 数字相加
10 + 5;        // 15
3.14 + 2.86;   // 6

// 字符串拼接
"Hello" + " World"; // "Hello World"
"Number: " + 123;   // "Number: 123"

// 混合类型
"10" + 5;      // "105"（字符串拼接）
10 + "5";      // "105"（字符串拼接）
```

### 减法（-）

```js
10 - 5;        // 5
3.14 - 1.14;   // 2

// 字符串会转换为数字
"10" - 5;      // 5
"10" - "5";    // 5
```

### 乘法（*）

```js
10 * 5;        // 50
3.14 * 2;      // 6.28

// 字符串会转换为数字
"10" * 5;      // 50
"10" * "5";    // 50
```

### 除法（/）

```js
10 / 5;        // 2
10 / 3;        // 3.3333333333333335

// 除以零
10 / 0;        // Infinity
-10 / 0;       // -Infinity
0 / 0;         // NaN
```

### 取余（%）

```js
10 % 3;        // 1
10 % 5;        // 0
15 % 7;        // 1

// 负数取余
-10 % 3;       // -1
10 % -3;       // 1
```

### 指数（**）

```js
2 ** 3;        // 8（2的3次方）
10 ** 2;       // 100
2 ** 0.5;      // 1.4142135623730951（平方根）
```

## 自增和自减运算符

### 前置自增（++x）

```js
let x = 10;
let y = ++x;   // x 先自增，再赋值给 y
console.log(x); // 11
console.log(y); // 11
```

### 后置自增（x++）

```js
let x = 10;
let y = x++;   // x 先赋值给 y，再自增
console.log(x); // 11
console.log(y); // 10
```

### 前置自减（--x）

```js
let x = 10;
let y = --x;   // x 先自减，再赋值给 y
console.log(x); // 9
console.log(y); // 9
```

### 后置自减（x--）

```js
let x = 10;
let y = x--;   // x 先赋值给 y，再自减
console.log(x); // 9
console.log(y); // 10
```

## 赋值运算符

### 基本赋值（=）

```js
let x = 10;
x = 20;        // x 现在是 20
```

### 复合赋值

```js
let x = 10;

x += 5;        // x = x + 5，结果是 15
x -= 3;        // x = x - 3，结果是 12
x *= 2;        // x = x * 2，结果是 24
x /= 4;        // x = x / 4，结果是 6
x %= 5;        // x = x % 5，结果是 1
x **= 2;       // x = x ** 2，结果是 1
```

## 特殊值处理

### NaN（Not a Number）

```js
// 产生 NaN 的情况
"abc" - 1;     // NaN
"abc" * 2;      // NaN
"abc" / 2;     // NaN
0 / 0;         // NaN

// 检查 NaN
isNaN(NaN);           // true
Number.isNaN(NaN);    // true（推荐）
```

### Infinity（无穷大）

```js
// 产生 Infinity 的情况
10 / 0;        // Infinity
-10 / 0;       // -Infinity
1e308 * 2;     // Infinity

// 检查 Infinity
isFinite(Infinity);   // false
Number.isFinite(Infinity); // false
```

## 数值精度问题

### 浮点数精度

```js
// JavaScript 使用 IEEE 754 双精度浮点数
0.1 + 0.2;     // 0.30000000000000004（精度问题）

// 解决方案：使用整数运算
(0.1 * 10 + 0.2 * 10) / 10; // 0.3

// 或使用 toFixed（注意返回字符串）
(0.1 + 0.2).toFixed(1); // "0.3"
```

## Math 对象

### 常用方法

```js
// 数学函数
Math.abs(-10);        // 10（绝对值）
Math.ceil(3.14);      // 4（向上取整）
Math.floor(3.14);     // 3（向下取整）
Math.round(3.14);     // 3（四舍五入）
Math.max(1, 2, 3);    // 3（最大值）
Math.min(1, 2, 3);    // 1（最小值）
Math.random();        // 0 到 1 之间的随机数
Math.sqrt(16);        // 4（平方根）
Math.pow(2, 3);       // 8（幂运算）
```

## 最佳实践

### 1. 注意类型转换

```js
// + 运算符的特殊行为
let result = "10" + 5; // "105"（字符串拼接）

// 需要数字运算时，显式转换
let result2 = Number("10") + 5; // 15
```

### 2. 处理精度问题

```js
// 使用整数运算避免精度问题
let result = (0.1 * 100 + 0.2 * 100) / 100; // 0.3
```

### 3. 检查 NaN 和 Infinity

```js
// 检查计算结果
let result = someCalculation();
if (!Number.isFinite(result)) {
    console.error("Invalid result");
}
```

## 练习

1. **基本运算**：编写代码计算两个数的和、差、积、商和余数。

2. **自增自减**：演示前置自增和后置自增的区别，理解执行顺序。

3. **复合赋值**：使用复合赋值运算符（+=、-=、*=、/=）简化代码。

4. **字符串拼接**：使用 + 运算符进行字符串拼接，注意类型转换。

5. **Math 对象**：使用 Math 对象的方法（Math.max、Math.min、Math.round 等）进行数学运算。

完成以上练习后，继续学习下一节，了解比较运算符。

## 总结

算术运算符是 JavaScript 中最常用的运算符。主要要点：

- 基本运算符：+、-、*、/、%、**
- 自增自减：++、--
- 复合赋值：+=、-=、*=、/=、%=、**=
- 注意 + 运算符的特殊行为（字符串拼接）
- 注意浮点数精度问题
- 使用 Math 对象进行复杂数学运算

继续学习下一节，了解比较运算符。
