# 5.1.1 数据库设计原则

## 1. 概述

数据库设计原则是数据库设计的基础指导，遵循这些原则可以设计出高效、可维护、可扩展的数据库。良好的数据库设计是应用成功的关键。

## 2. 核心原则

### 2.1 数据完整性

- **实体完整性**：每个表必须有主键
- **参照完整性**：外键关系必须有效
- **域完整性**：数据必须符合定义的类型和约束
- **用户定义完整性**：业务规则约束

### 2.2 数据一致性

- **避免数据冗余**：减少数据重复
- **统一数据格式**：保持数据格式一致
- **约束保证**：使用约束保证数据一致性

### 2.3 性能优化

- **合理索引**：为常用查询创建索引
- **表结构优化**：优化表结构设计
- **查询优化**：优化查询语句

## 3. 设计步骤

### 3.1 需求分析

- 分析业务需求
- 识别实体和关系
- 确定数据属性
- 定义业务规则

### 3.2 概念设计

- 绘制 ER 图
- 定义实体关系
- 确定实体属性
- 识别主键和外键

### 3.3 逻辑设计

- 转换为关系模型
- 规范化设计
- 优化表结构
- 定义约束

### 3.4 物理设计

- 选择存储引擎
- 设计索引
- 分区设计
- 性能优化

## 4. 命名规范

### 4.1 表命名

- 使用复数形式：`users`、`orders`
- 使用下划线分隔：`user_profiles`
- 避免关键字：不使用 SQL 关键字
- 保持简洁：使用有意义的名称

### 4.2 字段命名

- 使用小写字母和下划线
- 使用有意义的名称
- 避免缩写
- 保持一致性

### 4.3 索引命名

- 使用前缀：`idx_`、`uk_`、`pk_`
- 包含表名和字段名
- 保持简洁

## 5. 数据类型选择

### 5.1 数值类型

- **整数**：根据范围选择 `INT`、`BIGINT`
- **小数**：使用 `DECIMAL` 保证精度
- **浮点数**：使用 `FLOAT`、`DOUBLE` 注意精度

### 5.2 字符串类型

- **定长字符串**：使用 `CHAR` 固定长度
- **变长字符串**：使用 `VARCHAR` 可变长度
- **文本类型**：使用 `TEXT` 大文本

### 5.3 日期时间类型

- **日期**：使用 `DATE`
- **时间**：使用 `TIME`
- **日期时间**：使用 `DATETIME`、`TIMESTAMP`

## 6. 主键设计

### 6.1 主键选择

- **自增 ID**：简单高效
- **UUID**：分布式场景
- **业务主键**：有意义的业务标识
- **复合主键**：多字段组合

### 6.2 主键原则

- 唯一性：保证唯一
- 非空：不能为空
- 稳定性：不经常变化
- 简洁性：尽量简洁

## 7. 外键设计

### 7.1 外键使用

- 保证参照完整性
- 定义级联操作
- 考虑性能影响
- 合理使用索引

### 7.2 外键约束

- **CASCADE**：级联删除/更新
- **RESTRICT**：限制删除/更新
- **SET NULL**：设置为 NULL
- **NO ACTION**：不执行操作

## 8. 最佳实践

### 8.1 设计原则

- 遵循范式化设计
- 合理使用索引
- 考虑扩展性
- 保持简洁

### 8.2 性能考虑

- 优化查询性能
- 减少数据冗余
- 合理使用索引
- 考虑分区

### 8.3 可维护性

- 清晰的命名
- 完善的文档
- 合理的注释
- 版本控制

## 9. 注意事项

- **性能平衡**：平衡范式化和性能
- **扩展性**：考虑未来扩展需求
- **安全性**：考虑数据安全
- **可维护性**：保持设计清晰

## 10. 常见问题

### 10.1 如何选择主键？

根据业务需求选择，简单场景用自增 ID，分布式场景用 UUID。

### 10.2 何时使用外键？

需要保证数据完整性时使用，但要注意性能影响。

### 10.3 如何优化数据库设计？

遵循范式化设计，合理使用索引，优化查询语句。

## 11. 相关资源

- [数据库设计最佳实践](https://en.wikipedia.org/wiki/Database_design)
- [ER 图设计](https://en.wikipedia.org/wiki/Entity%E2%80%93relationship_model)

---

**下一节**：[5.1.2 范式与反范式](section-02-normalization.md)
